{
  "kind": "build_request",
  "title": "Fix BLE device discovery: enable acceptAllDevices and add optionalServices UUID",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-1",
      "text": "In the Bluetooth connection request (within BluetoothContext.tsx and/or useEyeRBluetooth.ts), update the navigator.bluetooth.requestDevice() call to use 'acceptAllDevices: true' instead of any device filters, and add the device's NUS service UUID '6e400001-b5a3-f393-e0a9-e50e24dcca9e' to the 'optionalServices' array so the browser grants access to that GATT service after pairing.",
      "target": "frontend",
      "source": {
        "messageIds": [
          "msg-7"
        ],
        "quotes": [
          "update the Bluetooth request to 'acceptAllDevices: true' and include 'optionalServices' for my device's specific UUID  6e400001-b5a3-f393-e0a9-e50e24dcca9e"
        ]
      },
      "acceptanceCriteria": [
        "navigator.bluetooth.requestDevice() is called with { acceptAllDevices: true, optionalServices: ['6e400001-b5a3-f393-e0a9-e50e24dcca9e'] } — no 'filters' property is present.",
        "The device picker dialog appears in the browser and lists the user's BLE device without requiring a name or service filter match.",
        "After selecting the device, the app can successfully connect to GATT and access the NUS service using UUID 6e400001-b5a3-f393-e0a9-e50e24dcca9e.",
        "No TypeScript or runtime errors are introduced by the change.",
        "The hardcoded NUS service UUID in bleNus.ts (if used as the primary service UUID reference) is consistent with 6e400001-b5a3-f393-e0a9-e50e24dcca9e."
      ]
    }
  ],
  "constraints": [
    "Do not remove or alter the existing NUS characteristic UUIDs (TX/RX) used for data parsing — only the requestDevice() call options should change.",
    "Do not modify any files under frontend/src/hooks/useInternetIdentity.ts, frontend/src/hooks/useActor.ts, frontend/src/main.tsx, or frontend/src/components/ui."
  ],
  "nonGoals": [
    "Adding new BLE device profiles or characteristic parsing logic.",
    "Changes to the backend canister.",
    "UI redesign of the DeviceConnection page."
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}